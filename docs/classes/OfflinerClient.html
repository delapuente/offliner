<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>OfflinerClient</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/FetchConfig.html">FetchConfig</a></li>
            
                <li><a href="../classes/Fetcher.html">Fetcher</a></li>
            
                <li><a href="../classes/Offliner.html">Offliner</a></li>
            
                <li><a href="../classes/OfflinerClient.html">OfflinerClient</a></li>
            
                <li><a href="../classes/PrefetchConfig.html">PrefetchConfig</a></li>
            
                <li><a href="../classes/Resource.html">Resource</a></li>
            
                <li><a href="../classes/SourceHandler.html">SourceHandler</a></li>
            
                <li><a href="../classes/UpdateConfig.html">UpdateConfig</a></li>
            
                <li><a href="../classes/UpdateControl.html">UpdateControl</a></li>
            
                <li><a href="../classes/UpdateImplementation.html">UpdateImplementation</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/fetchers.html">fetchers</a></li>
            
                <li><a href="../modules/off.html">off</a></li>
            
                <li><a href="../modules/sources.html">sources</a></li>
            
                <li><a href="../modules/updaters.html">updaters</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1>OfflinerClient Class</h1>
<div class="box meta">
    

    

    
        <div class="foundat">
            Defined in: <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l19"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:19</code></a>
        </div>
    

    
        
            Module: <a href="../modules/off.html">off</a>
        
    

    
</div>



<div class="box intro">
    <p>The exported global <code>off</code> object contains methods for communicating with
the offliner worker in charge.</p>

</div>



<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

        
            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
        
        
            <li class="api-class-tab properties"><a href="#properties">Properties</a></li>
        
        
        
            <li class="api-class-tab events"><a href="#events">Events</a></li>
        
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

            
                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                        
                            <li class="index-item method private">
                                <a href="#method__activateNextCache">_activateNextCache</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__broadcastMessage">_broadcastMessage</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__checkIfNewVersion">_checkIfNewVersion</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__crossPromise">_crossPromise</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__doPrefetch">_doPrefetch</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__evolveCache">_evolveCache</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__fetch">_fetch</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__getCacheNameForVersion">_getCacheNameForVersion</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__getLatestVersion">_getLatestVersion</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__handleMessage">_handleMessage</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__has">_has</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__installMessageHandlers">_installMessageHandlers</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__openActiveCache">_openActiveCache</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__prefetch">_prefetch</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__resolveCrossPromise">_resolveCrossPromise</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__runListeners">_runListeners</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method__send">_send</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__sendActivationDone">_sendActivationDone</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__sendActivationFailed">_sendActivationFailed</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__swapCaches">_swapCaches</a>

                                
                                
                            </li>
                        
                            <li class="index-item method private">
                                <a href="#method__updateCurrentVersion">_updateCurrentVersion</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_activate">activate</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_install">install</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_on">on</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_restore">restore</a>

                                
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_update">update</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            
                <div class="index-section properties">
                    <h3>Properties</h3>

                    <ul class="index-list properties">
                        
                            <li class="index-item property private">
                                <a href="#property__eventListeners">_eventListeners</a>

                                
                                
                            </li>
                        
                            <li class="index-item property private">
                                <a href="#property__xpromises">_xpromises</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            

            

            
                <div class="index-section events">
                    <h3>Events</h3>

                    <ul class="index-list events">
                        
                            <li class="index-item event">
                                <a href="#event_activationPending">activationPending</a>

                                
                                
                            </li>
                        
                    </ul>
                </div>
            
        </div>

        
            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method__activateNextCache" class="method item private">
    <h3 class="name"><code>_activateNextCache</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>
    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l550"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:550</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Change the active cache to be the evolved cache if available. Once the
active cache has been updated, the former one is lost.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise</span>:
                    
                    <p>A Promise resolving in the new version or rejecting
if there is no pending activation.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__broadcastMessage" class="method item private">
    <h3 class="name"><code>_broadcastMessage</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>msg</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l406"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:406</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Broadcast a message in the clients. The method will add the <code>offliner:</code>
prefix to the type of the events but this is stripped out automatically by
the 
client side.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">msg</code>
                        <span class="type">Any</span>
                    

                    

                    <div class="param-description">
                        <p>the message to be broadcasted.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__checkIfNewVersion" class="method item private">
    <h3 class="name"><code>_checkIfNewVersion</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise<String></span>
        </span>
    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l496"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:496</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Determine if there is a new version based on the latest version and the
current one by using the update middleware.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise<String></span>:
                    
                    <p>latestVersion The new version tag is returned
if there is a new version or <code>null</code> otherwise.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__crossPromise" class="method item">
    <h3 class="name"><code>_crossPromise</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>order</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l215"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:215</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Creates a cross promise registration. A <em>cross promise</em> or xpromise
is a special kind of promise that is generated in the client but whose
implementation is in a worker.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">order</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The string for the implementation part to select
the implementation to run.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise</span>:
                    
                    <p>A promise delegating its implementation in some code
running in a worker.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__doPrefetch" class="method item private">
    <h3 class="name"><code>_doPrefetch</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>cache</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l453"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:453</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Processes prefetch declared resources using the registered middlewares.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">cache</code>
                        <span class="type">Cache</span>
                    

                    

                    <div class="param-description">
                        <p>The cache for the middlewares to populate.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__evolveCache" class="method item private">
    <h3 class="name"><code>_evolveCache</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>newCache</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l525"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:525</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Evolves the current cache to the new cache by using the update middleware.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">newCache</code>
                        <span class="type">Cache</span>
                    

                    

                    <div class="param-description">
                        <p>The new cache.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__fetch" class="method item private">
    <h3 class="name"><code>_fetch</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>request</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l629"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:629</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Use configured middlewares to perform the fetch process.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">request</code>
                        <span class="type">Request</span>
                    

                    

                    <div class="param-description">
                        <p>The request to be fetched.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__getCacheNameForVersion" class="method item private">
    <h3 class="name"><code>_getCacheNameForVersion</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>version</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Promise<String></span>
        </span>
    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l430"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:430</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Return the CACHE name for a version given.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">version</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The version to calculate the name for.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise<String></span>:
                    
                    <p>A promise resolving with the name for the
version.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__getLatestVersion" class="method item private">
    <h3 class="name"><code>_getLatestVersion</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise<String></span>
        </span>
    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l484"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:484</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Obtains the latest version using the update middleware.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise<String></span>:
                    
                    <p>Tag representing the latest version. The tag will
be used as suffix for the new cache.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__handleMessage" class="method item">
    <h3 class="name"><code>_handleMessage</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>offlinerType</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>msg</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l176"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:176</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Discriminates between 
events which are treated in a special way and the rest of the events that
simply trigger the default dispatching algorithm.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">offlinerType</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The type of the message without the
<code>offliner:</code> prefix.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">msg</code>
                        <span class="type">Any</span>
                    

                    

                    <div class="param-description">
                        <p>The event.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__has" class="method item">
    <h3 class="name"><code>_has</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>type</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>handler</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>willBeThis</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type"></span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l196"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:196</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">type</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The type for the listener registration.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">handler</code>
                        <span class="type">Function</span>
                    

                    

                    <div class="param-description">
                        <p>The listener.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">willBeThis</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>The context object <code>this</code> which the function
will be called with.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                    <p><code>true</code> if the listener registration already exists.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__installMessageHandlers" class="method item">
    <h3 class="name"><code>_installMessageHandlers</code></h3>

    
        <span class="paren">()</span>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l147"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:147</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Registers the listeners for enabling communication between the worker
and the client code.</p>

    </div>

    

    

    
</div>

                
                    <div id="method__openActiveCache" class="method item private">
    <h3 class="name"><code>_openActiveCache</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise<Cache></span>
        </span>
    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l539"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:539</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Uses dynamic information to open the active CACHE.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise<Cache></span>:
                    
                    <p>A promise resolving to the active cache.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method__prefetch" class="method item private">
    <h3 class="name"><code>_prefetch</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l443"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:443</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Opens current active cache and starts prefetch.</p>

    </div>

    

    

    
</div>

                
                    <div id="method__resolveCrossPromise" class="method item">
    <h3 class="name"><code>_resolveCrossPromise</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>msg</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l248"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:248</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Resolves a cross promise based on information received by the
implementation in the worker.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">msg</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>An object with the proper data to resolve a xpromise.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__runListeners" class="method item">
    <h3 class="name"><code>_runListeners</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>type</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>evt</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l130"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:130</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Run the listeners for some type of event.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">type</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The type of the events selecting the listeners to
be run.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">evt</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>The event contents.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__send" class="method item">
    <h3 class="name"><code>_send</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>msg</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l239"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:239</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Sends a message to the worker.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">msg</code>
                        <span class="type">Any</span>
                    

                    

                    <div class="param-description">
                        <p>The message to be sent.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method__sendActivationDone" class="method item private">
    <h3 class="name"><code>_sendActivationDone</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l384"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:384</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Broadcast a message to all clients to indicate the activation of the
new version ended properly.</p>

    </div>

    

    

    
</div>

                
                    <div id="method__sendActivationFailed" class="method item private">
    <h3 class="name"><code>_sendActivationFailed</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l395"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:395</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Broadcast a message to all clients to indicate there was a failure while
activating the update.</p>

    </div>

    

    

    
</div>

                
                    <div id="method__swapCaches" class="method item private">
    <h3 class="name"><code>_swapCaches</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l569"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:569</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Makes active cache to be the next-version cache populated during a past
update process. After swapping, the previous cache is lost.</p>

    </div>

    

    

    
</div>

                
                    <div id="method__updateCurrentVersion" class="method item private">
    <h3 class="name"><code>_updateCurrentVersion</code></h3>

    
        <span class="paren">()</span>
    

    

    

    
        <span class="flag private">private</span>
    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l615"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:615</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Updates the current version.</p>

    </div>

    

    

    
</div>

                
                    <div id="method_activate" class="method item">
    <h3 class="name"><code>activate</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l117"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:117</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Performs the activation of the pending update. I.e. replaces the current
cache with that updated in the update process. Normally, you want to
reload the application when the activation ends successfuly.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise</span>:
                    
                    <p>A promise resolving into the activated version or
rejected with <code>no-activation-pending</code> if there was not an activation.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_install" class="method item">
    <h3 class="name"><code>install</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l58"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:58</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Register the offliner worker. The worker will be installed with
root <code>/</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register#Syntax">scope</a>
unless you add the <code>data-root</code> attribute to the script tag.</p>
<p>In the same way, the client will look for a script in the specified root
called <code>offliner-worker.js</code>. If you want to change this behaviour, use
the <code>data-worker</code> attribute.</p>
<p>For instance, suppose your web application is running under:
<a href="https://lodr.github.com/offliner">https://lodr.github.com/offliner</a></p>
<p>And you have your worker at:
<a href="https://lodr.github.com/offliner/worker.js">https://lodr.github.com/offliner/worker.js</a></p>
<p>Then the script tag should looks like:</p>
<pre class="code prettyprint"><code class="lang-html">&lt;script src=&quot;js/offliner-client.js&quot; data-root=&quot;offliner&quot; data-worker=&quot;worker.js&quot;&gt;&lt;/script&gt;</code></pre>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise</span>:
                    
                    <p>A promise resolving if the installation success.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_on" class="method item">
    <h3 class="name"><code>on</code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>type</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>handler</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>willBeThis</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l88"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:88</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Attaches a listener for a type of event.</p>

    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">type</code>
                        <span class="type">String</span>
                    

                    

                    <div class="param-description">
                        <p>The type of the event.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">handler</code>
                        <span class="type">Callback</span>
                    

                    

                    <div class="param-description">
                        <p>The callback receiving the event.</p>

                    </div>

                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">willBeThis</code>
                        <span class="type">Object</span>
                    

                    

                    <div class="param-description">
                        <p>The context object <code>this</code> for the <code>handler</code>.</p>

                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method_restore" class="method item">
    <h3 class="name"><code>restore</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type"><a href="../classes/OfflinerClient.html" class="crosslink">OfflinerClient</a></span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l45"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:45</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Call <code>restore()</code> when you want the <code>off</code> name in the global scope for
other purposes. The method will restore the previous contents to the
global variable and return the <code>OfflinerClient</code>.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type"><a href="../classes/OfflinerClient.html" class="crosslink">OfflinerClient</a></span>:
                    
                    <p>The current offliner client.</p>

                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_update" class="method item">
    <h3 class="name"><code>update</code></h3>

    
        <span class="paren">()</span>
    

    
        <span class="returns-inline">
            <span class="type">Promise</span>
        </span>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l103"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:103</code></a>
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Request an update to offliner.</p>

    </div>

    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Promise</span>:
                    
                    <p>If the update process is successful, the promise will
resolve to a new version and an

will be triggered. If the update is not needed, the promise will be
rejected with <code>no-update-needed</code> reason.</p>

                
            </div>
        </div>
    

    
</div>

                
            </div>
        

        
            <div id="properties" class="api-class-tabpanel">
                <h2 class="off-left">Properties</h2>

                
                    <div id="property__eventListeners" class="property item private">
    <h3 class="name"><code>_eventListeners</code></h3>
    <span class="type">Object</span>

    

    
        <span class="flag private">private</span>
    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l27"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:27</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Callbacks for the events.</p>

    </div>

    

    

    
</div>

                
                    <div id="property__xpromises" class="property item private">
    <h3 class="name"><code>_xpromises</code></h3>
    <span class="type">Object</span>

    

    
        <span class="flag private">private</span>
    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner-client.js.html#l36"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner-client.js:36</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Implementation callbacks for cross promises by its unique id.</p>

    </div>

    

    

    
</div>

                
            </div>
        

        

        
            <div id="events" class="api-class-tabpanel">
                <h2 class="off-left">Events</h2>

                
                    <div id="event_activationPending" class="events item">
    <h3 class="name"><code>activationPending</code></h3>
    <span class="type"></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
                
                Defined in
                
            
        
        
        <a href="../files/_home_salva_workspace_offliner_src_offliner.js.html#l374"><code>&#x2F;home&#x2F;salva&#x2F;workspace&#x2F;offliner&#x2F;src&#x2F;offliner.js:374</code></a>
        
        </p>

        

        
    </div>

    <div class="description">
        <p>Event emitted on worker activation or under request to point out there
is a new version activation pending.</p>

    </div>

    


    
</div>

                
            </div>
        
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
